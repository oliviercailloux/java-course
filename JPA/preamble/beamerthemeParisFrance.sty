% Theme used for courses in Paris-Dauphine, starting from 2015, based on theme Brussels, based on theme CambridgeUS by Madhusudan Singh
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.

\mode<presentation>
\useinnertheme[shadow=true]{rounded}
\usecolortheme{beaver}
\setbeamercolor{block title}{use=structure,fg=structure.fg,bg=structure.fg!20!bg}
\setbeamercolor{block title alerted}{use=alerted text,fg=alerted text.fg,bg=alerted text.fg!20!bg}
\setbeamercolor{block title example}{use=example text,fg=example text.fg,bg=example text.fg!20!bg}

\setbeamercolor{block body}{parent=normal text,use=block title,bg=block title.bg!50!bg}
\setbeamercolor{block body alerted}{parent=normal text,use=block title alerted,bg=block title alerted.bg!50!bg}
\setbeamercolor{block body example}{parent=normal text,use=block title example,bg=block title example.bg!50!bg}

% \setbeamerfont{block title}{size={}}
% \setbeamercolor{titlelike}{parent=structure,bg=white}

% \setbeamercolor{subsection in head/foot}{fg=black,bg=white}
% \setbeamercolor*{section in head/foot}{parent=section in head/foot}
\setbeamercolor*{subsection in head/foot}{parent=section in head/foot}
\setbeamercolor*{page number in head/foot}{fg=darkred,bg=gray!10!white}
\setbeamercolor*{framesubtitle}{fg=black}%no effect!?!
\setbeamercolor{first part in head/foot}{use=palette primary, fg=palette primary.fg, bg=palette primary.bg}
\setbeamercolor{second part in head/foot}{use=palette quaternary, fg=palette quaternary.fg, bg=palette quaternary.bg}

\hypersetup{colorlinks=true, linkcolor=blue!70!red, urlcolor=blue}

\setbeamertemplate{headline}{%
\begin{beamercolorbox}[ht=2.6ex,dp=1ex]{section in head/foot}%2.5 creates plenty of compilation errors
  \insertsectionnavigationhorizontal{\paperwidth}{}{}
\end{beamercolorbox}%
\begin{beamercolorbox}[ht=2.5ex,dp=1ex]{subsection in head/foot}
  \insertsubsectionnavigationhorizontal{\paperwidth}{}{}
\end{beamercolorbox}
}

% bug corrected, https://bitbucket.org/rivanvx/beamer/issue/195/incorrect-handling-of-empty-shortinstitute
\setbeamertemplate{footline}{%
	\leavevmode%
	\hbox{%
		\begin{beamercolorbox}[wd=.45\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
			\usebeamerfont{author in head/foot}%
			\insertshortauthor%
			\expandafter\beamer@ifempty%
				\expandafter{\beamer@shortinstitute}{}{~~(\insertshortinstitute)}
		\end{beamercolorbox}%
		\begin{beamercolorbox}[wd=.45\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
			\usebeamerfont{title in head/foot}\insertshorttitle
		\end{beamercolorbox}%
		\begin{beamercolorbox}[wd=.1\paperwidth,ht=2.25ex,dp=1ex,right]{page number in head/foot}%
			\insertframenumber{} / \inserttotalframenumber\hspace*{2ex}%
		\end{beamercolorbox}%
	}
}

\setbeamertemplate{footline}{%
	\leavevmode%
	\hbox{%
		\begin{beamercolorbox}[wd=.45\paperwidth,ht=2.25ex,dp=1ex,center]{first part in head/foot}%
			\usebeamerfont{title in head/foot}%
			\insertshorttitle%
		\end{beamercolorbox}%
		\begin{beamercolorbox}[wd=.45\paperwidth,ht=2.25ex,dp=1ex,center]{second part in head/foot}%
			\usebeamerfont{subtitle in head/foot}%
			\insertshortsubtitle
		\end{beamercolorbox}%
		\begin{beamercolorbox}[wd=.1\paperwidth,ht=2.25ex,dp=1ex,right]{page number in head/foot}%
			\insertframenumber{} / \inserttotalframenumber\hspace*{2ex}%
		\end{beamercolorbox}%
	}
}
%avoids coloring the links according to hyperref linkcolor (which would bypass beamerâ€™s color system); see http://tex.stackexchange.com/questions/203056/changing-url-colors-in-headline-footline-of-beamer-template
\addtobeamertemplate{headline}{\hypersetup{linkcolor=.}}{}
\addtobeamertemplate{footline}{\hypersetup{linkcolor=.}}{}

\mode<all>

